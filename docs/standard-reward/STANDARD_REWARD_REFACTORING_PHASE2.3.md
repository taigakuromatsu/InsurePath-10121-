# Phase2.3 å®Ÿè£…æŒ‡ç¤ºæ›¸: è³ä¸ä¿é™ºæ–™æ©Ÿèƒ½ã®å†è¨­è¨ˆ

## æ”¹è¨‚å±¥æ­´
- 2025å¹´1æœˆ: åˆç‰ˆä½œæˆ
- 2025å¹´1æœˆ: ä¿®æ­£ç‰ˆï¼ˆ50éŠ­ãƒ«ãƒ¼ãƒ«ä»•æ§˜çµ±ä¸€ã€ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«æ•´ç†ã€é›†è¨ˆãƒ­ã‚¸ãƒƒã‚¯æ–¹é‡å¤‰æ›´ãªã©ï¼‰

---

## 1. æ¦‚è¦

### 1-1. ç›®çš„ãƒ»èƒŒæ™¯

è³ä¸ä¿é™ºæ–™æ©Ÿèƒ½ã‚’ã€æœˆæ¬¡ä¿é™ºæ–™ã®ãƒ­ã‚¸ãƒƒã‚¯ãƒ»UIæ–¹é‡ã«åˆã‚ã›ã¦å†è¨­è¨ˆã—ã¾ã™ã€‚

**ç¾çŠ¶ã®å•é¡Œç‚¹:**
- è³ä¸ä¿é™ºæ–™ã®è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ãŒæœˆæ¬¡ä¿é™ºæ–™ã¨ç•°ãªã‚‹ï¼ˆ50éŠ­ãƒ«ãƒ¼ãƒ«æœªå®Ÿè£…ã€ç«¯æ•°å‡¦ç†æ–¹æ³•ãŒç•°ãªã‚‹ï¼‰
- å¥åº·ä¿é™ºï¼‹ä»‹è­·ä¿é™ºã¨åšç”Ÿå¹´é‡‘ã®é›†è¨ˆæ–¹æ³•ãŒæœˆæ¬¡ä¿é™ºæ–™ã¨çµ±ä¸€ã•ã‚Œã¦ã„ãªã„
- äº‹æ¥­æ‰€å˜ä½ã®ç´å…¥å‘ŠçŸ¥é¡ã®ç®—å‡ºæ–¹æ³•ãŒåˆ¶åº¦ä¸Šã®ãƒ«ãƒ¼ãƒ«ã¨ä¸€è‡´ã—ã¦ã„ãªã„
- UIæ§‹æˆãŒæœˆæ¬¡ä¿é™ºæ–™ãƒšãƒ¼ã‚¸ã¨å¤§ããç•°ãªã‚‹

**ç›®æŒ‡ã™çŠ¶æ…‹:**
- æœˆæ¬¡ä¿é™ºæ–™ã¨åŒã˜è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ãƒ»ç«¯æ•°å‡¦ç†ã‚’é©ç”¨
- å¥åº·ä¿é™ºï¼‹ä»‹è­·ä¿é™ºã¨åšç”Ÿå¹´é‡‘ã‚’å®Œå…¨ã«åˆ†é›¢ã—ã¦è¨ˆç®—ãƒ»é›†è¨ˆ
- äº‹æ¥­æ‰€å˜ä½ã®ç´å…¥å‘ŠçŸ¥é¡ã‚’æ­£ã—ãç®—å‡ºï¼ˆå„äººå…¨é¡ã‚’åˆè¨ˆ â†’ 1å††æœªæº€åˆ‡ã‚Šæ¨ã¦ï¼‰
- æœˆæ¬¡ä¿é™ºæ–™ãƒšãƒ¼ã‚¸ã¨çµ±ä¸€æ„Ÿã®ã‚ã‚‹UIæ§‹æˆ

### 1-2. åŸºæœ¬ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

1. **ã€Œè³ä¸ã®å…¥åŠ›ã€ã¨ã€Œä¿é™ºæ–™è¨ˆç®—ãƒ»é›†è¨ˆã€ã‚’åˆ†é›¢**
   - 1ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ = ã€Œã‚ã‚‹å¾“æ¥­å“¡ã«ã€ã‚ã‚‹æ”¯çµ¦æ—¥ã§æ”¯çµ¦ã—ãŸè³ä¸1å›åˆ†ã€
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€Œå¾“æ¥­å“¡ã€ã€Œæ”¯çµ¦æ—¥ã€ã€Œè³ä¸æ”¯çµ¦é¡ï¼ˆç¨å¼•å‰ï¼‰ã€ã‚’å…¥åŠ›ã—ã¦ä¿å­˜

2. **å¯¾è±¡å¹´æœˆï¼ˆYYYY-MMï¼‰ã‚’é¸ã¶ã¨ã€ãã®æœˆã«æ”¯çµ¦ã•ã‚ŒãŸè³ä¸ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰é›†è¨ˆ**
   - å¥åº·ä¿é™ºï¼‹ä»‹è­·ä¿é™ºã¨åšç”Ÿå¹´é‡‘ã‚’**å®Œå…¨ã«åˆ¥ã€…ã«**é›†è¨ˆ

3. **æœˆæ¬¡ä¿é™ºæ–™ã¨åŒã˜ãƒ­ã‚¸ãƒƒã‚¯ã‚’é©ç”¨**
   - 50éŠ­ãƒ«ãƒ¼ãƒ«ã§å¾“æ¥­å“¡è² æ‹…é¡ã‚’ç«¯æ•°å‡¦ç†
   - äº‹æ¥­æ‰€å˜ä½ã®ç´å…¥å‘ŠçŸ¥é¡ = å„äººå…¨é¡ã‚’åˆè¨ˆ â†’ 1å††æœªæº€åˆ‡ã‚Šæ¨ã¦
   - ä¼šç¤¾è² æ‹…åˆè¨ˆ = ç´å…¥å‘ŠçŸ¥é¡ âˆ’ å¾“æ¥­å“¡è² æ‹…åˆè¨ˆ

4. **è³ä¸ç‰¹æœ‰ã®ãƒ«ãƒ¼ãƒ«ã‚’æ­£ã—ãæ‰±ã†**
   - å¥åº·ä¿é™ºï¼šå¹´åº¦ï¼ˆ4/1ã€œç¿Œ3/31ï¼‰ã§æ¨™æº–è³ä¸é¡ç´¯è¨ˆ 573 ä¸‡å††ãŒä¸Šé™
   - åšç”Ÿå¹´é‡‘ï¼š1å›ã®æ¨™æº–è³ä¸é¡ 150 ä¸‡å††ãŒä¸Šé™

---

## 2. å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«

### 2-1. å¤‰æ›´å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«

**è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯:**
- `src/app/utils/bonus-calculator.ts`
  - `calculateBonusPremium()` é–¢æ•°ã‚’æœˆæ¬¡ä¿é™ºæ–™ã®ãƒ­ã‚¸ãƒƒã‚¯ã«åˆã‚ã›ã¦å¤‰æ›´
  - 50éŠ­ãƒ«ãƒ¼ãƒ«ã®é©ç”¨ï¼ˆ`roundForEmployeeDeduction()` ã‚’æµç”¨ï¼‰
  - å¥åº·ä¿é™ºï¼‹ä»‹è­·ä¿é™ºã¨åšç”Ÿå¹´é‡‘ã‚’åˆ†é›¢ã—ãŸè¨ˆç®—çµæœã‚’è¿”ã™

**ã‚µãƒ¼ãƒ“ã‚¹å±¤:**
- `src/app/services/bonus-premiums.service.ts`
  - æ—¢å­˜ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯åŸºæœ¬çš„ã«ç¶­æŒ
  - å¿…è¦ã«å¿œã˜ã¦ã€å¹´åº¦ç´¯è¨ˆè¨ˆç®—ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’èª¿æ•´

**å…¥åŠ›ãƒ€ã‚¤ã‚¢ãƒ­ã‚°:**
- `src/app/pages/premiums/bonus/bonus-form-dialog.component.ts`
  - ä¿å­˜æ™‚ã®å‡¦ç†ã‚’æ–°ã—ã„ãƒ­ã‚¸ãƒƒã‚¯ã«åˆã‚ã›ã¦å¤‰æ›´
  - ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºã¯ç°¡æ˜“çš„ãªã‚‚ã®ã«å¤‰æ›´ï¼ˆå¿…é ˆã§ã¯ãªã„ï¼‰

**ãƒšãƒ¼ã‚¸:**
- `src/app/pages/premiums/bonus/bonus-premiums.page.ts`
  - UIæ§‹æˆã‚’æœˆæ¬¡ä¿é™ºæ–™ãƒšãƒ¼ã‚¸ã«åˆã‚ã›ã¦å¤§å¹…ã«å¤‰æ›´
  - å¯¾è±¡å¹´æœˆã‚»ãƒ¬ã‚¯ãƒˆã‚’è¿½åŠ 
  - å¥åº·ä¿é™ºï¼‹ä»‹è­·ä¿é™ºã¨åšç”Ÿå¹´é‡‘ã‚’åˆ†é›¢ã—ãŸãƒ†ãƒ¼ãƒ–ãƒ«ãƒ»é›†è¨ˆè¡¨ç¤º
  - ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ã‚’è¿½åŠ ï¼ˆæœˆæ¬¡ä¿é™ºæ–™ãƒšãƒ¼ã‚¸ã¨åŒæ§˜ã®æ§‹æˆï¼‰

**å‹å®šç¾©:**
- `src/app/types.ts`
  - `BonusPremium` å‹ã«æ–°ã—ã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ 

### 2-2. å‚è€ƒãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆå¤‰æ›´ã—ãªã„ï¼‰

**æœˆæ¬¡ä¿é™ºæ–™é–¢é€£ï¼ˆãƒ­ã‚¸ãƒƒã‚¯ãƒ»UIã®å‚è€ƒï¼‰:**
- `src/app/utils/premium-calculator.ts`
  - `roundForEmployeeDeduction()` é–¢æ•°ï¼ˆ50éŠ­ãƒ«ãƒ¼ãƒ«ï¼‰
  - `isCareInsuranceTarget()` é–¢æ•°ï¼ˆä»‹è­·ä¿é™ºå¯¾è±¡åˆ¤å®šï¼‰
  - `hasInsuranceInMonth()` é–¢æ•°ï¼ˆè³‡æ ¼å–å¾—æ—¥ãƒ»å–ªå¤±æ—¥ãƒ™ãƒ¼ã‚¹ã®åˆ¤å®šï¼‰
- `src/app/pages/premiums/monthly/monthly-premiums.page.ts`
  - UIæ§‹æˆãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ãƒ»ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆã®å‚è€ƒ

---

## 3. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å¤‰æ›´æ–¹é‡

### 3-1. BonusPremium å‹ã®å¤‰æ›´

**åŸºæœ¬ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆç¶­æŒï¼‰:**
```typescript
export interface BonusPremium {
  id: string;
  officeId: string;
  employeeId: string;
  payDate: IsoDateString;
  grossAmount: number;
  standardBonusAmount: number;
  fiscalYear: string;
  
  // ä¸Šé™é–¢é€£ï¼ˆå¿…é ˆï¼‰
  healthEffectiveAmount: number;      // å¥åº·ä¿é™ºã®æœ‰åŠ¹ãªæ¨™æº–è³ä¸é¡ï¼ˆä¸Šé™é©ç”¨å¾Œï¼‰
  healthExceededAmount: number;       // å¥åº·ä¿é™ºã®ä¸Šé™è¶…éé¡
  healthStandardBonusCumulative: number;  // å¥åº·ä¿é™ºã®å¹´åº¦å†…ç´¯è¨ˆ
  pensionEffectiveAmount: number;     // åšç”Ÿå¹´é‡‘ã®æœ‰åŠ¹ãªæ¨™æº–è³ä¸é¡ï¼ˆä¸Šé™é©ç”¨å¾Œï¼‰
  pensionExceededAmount: number;       // åšç”Ÿå¹´é‡‘ã®ä¸Šé™è¶…éé¡
  
  // æ–°è¦è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆUIè¡¨ç¤ºç”¨ã®è£œåŠ©å€¤ï¼‰
  healthCareFull?: number;           // å¥åº·ä¿é™ºï¼‹ä»‹è­·ä¿é™ºã®å…¨é¡ï¼ˆç«¯æ•°å‡¦ç†å‰ï¼‰
  healthCareEmployee?: number;       // å¥åº·ä¿é™ºï¼‹ä»‹è­·ä¿é™ºã®å¾“æ¥­å“¡è² æ‹…é¡ï¼ˆ50éŠ­ãƒ«ãƒ¼ãƒ«é©ç”¨å¾Œï¼‰
  healthCareEmployer?: number;       // å¥åº·ä¿é™ºï¼‹ä»‹è­·ä¿é™ºã®ä¼šç¤¾è² æ‹…é¡ï¼ˆå‚è€ƒå€¤ï¼‰
  pensionFull?: number;              // åšç”Ÿå¹´é‡‘ã®å…¨é¡ï¼ˆç«¯æ•°å‡¦ç†å‰ï¼‰
  totalFull?: number;                // è¡Œãƒ¬ãƒ™ãƒ«å‚è€ƒå€¤ï¼ˆhealthCareFull + pensionFullï¼‰
  
  // æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ–°ãƒ­ã‚¸ãƒƒã‚¯ã®çµæœã§ä¸Šæ›¸ãä¿å­˜ï¼ˆæœˆæ¬¡ä¿é™ºæ–™ã¨åŒã˜æ„å‘³ï¼‰
  healthTotal: number;               // å¥åº·ä¿é™ºï¼‹ä»‹è­·ä¿é™ºã®å…¨é¡ï¼ˆæœˆæ¬¡ã¨åŒã˜æ„å‘³ï¼‰
  healthEmployee: number;            // å¥åº·ä¿é™ºï¼‹ä»‹è­·ä¿é™ºã®å¾“æ¥­å“¡è² æ‹…é¡
  healthEmployer: number;            // å¥åº·ä¿é™ºï¼‹ä»‹è­·ä¿é™ºã®ä¼šç¤¾è² æ‹…é¡
  pensionTotal: number;              // åšç”Ÿå¹´é‡‘ã®å…¨é¡
  pensionEmployee: number;           // åšç”Ÿå¹´é‡‘ã®å¾“æ¥­å“¡è² æ‹…é¡
  pensionEmployer: number;           // åšç”Ÿå¹´é‡‘ã®ä¼šç¤¾è² æ‹…é¡
  totalEmployee: number;             // å¾“æ¥­å“¡è² æ‹…åˆè¨ˆï¼ˆå¥åº·ï¼‹åšå¹´ï¼‰
  totalEmployer: number;             // ä¼šç¤¾è² æ‹…åˆè¨ˆï¼ˆå¥åº·ï¼‹åšå¹´ï¼‰
  
  // ãƒ¡ã‚¿æƒ…å ±
  note?: string;
  createdAt: IsoDateString;
  createdByUserId?: string;
}
```

**ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®æ„å‘³ã¥ã‘:**

- **æ–°è¦è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆ`healthCareFull`, `healthCareEmployee`, `healthCareEmployer`, `pensionFull`, `totalFull`ï¼‰:**
  - UIè¡¨ç¤ºç”¨ã®è£œåŠ©å€¤ã¨ã—ã¦ä¿å­˜
  - é›†è¨ˆã®ã€Œæ­£ã€ã¯æ¯å›è¨ˆç®—ã™ã‚‹ãŸã‚ã€ã“ã‚Œã‚‰ã®å€¤ã¯å‚è€ƒå€¤ã¨ã—ã¦æ‰±ã†

- **æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆ`healthTotal`, `pensionTotal`, `totalEmployee`, `totalEmployer` ãªã©ï¼‰:**
  - æœˆæ¬¡ä¿é™ºæ–™ã¨åŒã˜æ„å‘³ã§ä½¿ç”¨
  - æ–°ãƒ­ã‚¸ãƒƒã‚¯ã®è¨ˆç®—çµæœã‚’ä¿å­˜ã™ã‚‹ï¼ˆå¾Œæ–¹äº’æ›ã®ãŸã‚åå‰ã ã‘ç¶­æŒï¼‰
  - é›†è¨ˆã®ã€Œæ­£ã€ã¨ã—ã¦ã¯ä½¿ã‚ãšã€æ¯å› `effectiveAmount Ã— rate` ã‚’è¨ˆç®—ã™ã‚‹

- **ä¸Šé™é–¢é€£ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆ`healthEffectiveAmount`, `pensionEffectiveAmount` ãªã©ï¼‰:**
  - å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ã—ã¦æ‰±ã†
  - é›†è¨ˆè¨ˆç®—ã®ã€Œæ­£ã€ã¨ã—ã¦ä½¿ç”¨

**æ³¨æ„ç‚¹:**
- æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ï¼‰ã¯æœ¬æ ¼å®Ÿè£…å¾Œã« Firestore ã‹ã‚‰ä¸€åº¦ã™ã¹ã¦å‰Šé™¤ã™ã‚‹å‰æ
- ãã®ãŸã‚ã€optional ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚ˆã‚‹æ—¢å­˜ãƒ‡ãƒ¼ã‚¿äº’æ›ã®è€ƒæ…®ã¯ä¸è¦
- æ–°ãƒ­ã‚¸ãƒƒã‚¯ä»¥é™ã§ä¿å­˜ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã—ã‹ãªã„å‰æã§å®Ÿè£…ã™ã‚‹

---

## 4. å…¥åŠ›ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®ä»•æ§˜

### 4-1. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

**å¿…é ˆé …ç›®:**
- å¾“æ¥­å“¡ï¼ˆç¤¾ä¼šä¿é™ºåŠ å…¥è€…ã®ã¿é¸æŠå¯èƒ½ï¼‰
- æ”¯çµ¦æ—¥ï¼ˆdate å½¢å¼ï¼‰
- è³ä¸æ”¯çµ¦é¡ï¼ˆç¨å¼•å‰ã€1å††ä»¥ä¸Šï¼‰

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³é …ç›®:**
- ãƒ¡ãƒ¢

### 4-2. ä¿å­˜ãƒ•ãƒ­ãƒ¼

**ã‚¹ãƒ†ãƒƒãƒ—1: æ¨™æº–è³ä¸é¡ã®è¨ˆç®—**
```typescript
standardBonusAmount = Math.floor(grossAmount / 1000) * 1000;
```
- 1,000å††æœªæº€åˆ‡ã‚Šæ¨ã¦

**ã‚¹ãƒ†ãƒƒãƒ—2: å¹´åº¦ã®å–å¾—**
```typescript
fiscalYear = String(getFiscalYear(payDate));
```
- 4/1åŸºæº–ã§å¹´åº¦ã‚’æ±ºå®š

**ã‚¹ãƒ†ãƒƒãƒ—3: å¥åº·ä¿é™ºã®å¹´åº¦ç´¯è¨ˆã‚’å–å¾—**
```typescript
// æ—¢å­˜ã® BonusPremium ã‹ã‚‰å¹´åº¦ç´¯è¨ˆã‚’è¨ˆç®—
const cumulative = await bonusPremiumsService.getHealthStandardBonusCumulative(
  officeId,
  employeeId,
  fiscalYear,
  editingBonus?.payDate  // ç·¨é›†ä¸­ã®å ´åˆã¯é™¤å¤–
);
```

**ã‚¹ãƒ†ãƒƒãƒ—4: å¥åº·ä¿é™ºã®ä¸Šé™ãƒã‚§ãƒƒã‚¯**
```typescript
const healthCheck = checkHealthInsuranceLimit(
  standardBonusAmount,
  cumulative
);

// çµæœ:
// - healthEffectiveAmount: ä¸Šé™é©ç”¨å¾Œã®æœ‰åŠ¹ãªæ¨™æº–è³ä¸é¡
// - healthExceededAmount: ä¸Šé™è¶…éé¡
```

**ã‚¹ãƒ†ãƒƒãƒ—5: åšç”Ÿå¹´é‡‘ã®ä¸Šé™ãƒã‚§ãƒƒã‚¯**
```typescript
const pensionCheck = checkPensionLimit(standardBonusAmount);

// çµæœ:
// - pensionEffectiveAmount: ä¸Šé™é©ç”¨å¾Œã®æ¨™æº–è³ä¸é¡ï¼ˆæœ€å¤§150ä¸‡å††ï¼‰
// - pensionExceededAmount: ä¸Šé™è¶…éé¡
```

**ã‚¹ãƒ†ãƒƒãƒ—6: ä¿é™ºæ–™ç‡ã®å–å¾—**
```typescript
const yearMonth = payDate.substring(0, 7);  // YYYY-MM
const rates = await mastersService.getRatesForYearMonth(office, yearMonth);
// rates.healthRate, rates.careRate, rates.pensionRate
```

**ã‚¹ãƒ†ãƒƒãƒ—7: ä¿é™ºæ–™ã®è¨ˆç®—ï¼ˆæ–°ã—ã„ãƒ­ã‚¸ãƒƒã‚¯ï¼‰**

å¥åº·ä¿é™ºï¼‹ä»‹è­·ä¿é™º:
```typescript
// ä»‹è­·ä¿é™ºå¯¾è±¡åˆ¤å®šï¼ˆæœˆæ¬¡ã¨åŒã˜ãƒ­ã‚¸ãƒƒã‚¯ï¼‰
const isCareTarget = isCareInsuranceTarget(employee.birthDate, yearMonth);
const careRate = isCareTarget && rates.careRate ? rates.careRate : 0;
const combinedRate = rates.healthRate + careRate;

// å…¨é¡è¨ˆç®—ï¼ˆç«¯æ•°å‡¦ç†å‰ï¼‰
const healthCareFull = healthCheck.effectiveAmount * combinedRate;

// å¾“æ¥­å“¡è² æ‹…ï¼ˆ50éŠ­ãƒ«ãƒ¼ãƒ«é©ç”¨ï¼‰
const healthCareEmployee = roundForEmployeeDeduction(healthCareFull / 2);

// ä¼šç¤¾è² æ‹…ï¼ˆå‚è€ƒå€¤ï¼‰
const healthCareEmployer = healthCareFull - healthCareEmployee;
```

åšç”Ÿå¹´é‡‘:
```typescript
// å…¨é¡è¨ˆç®—ï¼ˆç«¯æ•°å‡¦ç†å‰ï¼‰
const pensionFull = pensionCheck.effectiveAmount * rates.pensionRate;

// å¾“æ¥­å“¡è² æ‹…ï¼ˆ50éŠ­ãƒ«ãƒ¼ãƒ«é©ç”¨ï¼‰
const pensionEmployee = roundForEmployeeDeduction(pensionFull / 2);

// ä¼šç¤¾è² æ‹…ï¼ˆå‚è€ƒå€¤ï¼‰
const pensionEmployer = pensionFull - pensionEmployee;
```

**ã‚¹ãƒ†ãƒƒãƒ—8: BonusPremium ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ä¿å­˜**
```typescript
const payload: BonusPremium = {
  // åŸºæœ¬æƒ…å ±
  id: buildDocId(employeeId, payDate),
  officeId,
  employeeId,
  payDate,
  grossAmount,
  standardBonusAmount,
  fiscalYear,
  
  // ä¸Šé™é–¢é€£ï¼ˆå¿…é ˆï¼‰
  healthEffectiveAmount: healthCheck.effectiveAmount,
  healthExceededAmount: healthCheck.exceededAmount,
  healthStandardBonusCumulative: cumulative + healthCheck.effectiveAmount,
  pensionEffectiveAmount: pensionCheck.effectiveAmount,
  pensionExceededAmount: pensionCheck.exceededAmount,
  
  // æ–°è¦è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆUIè¡¨ç¤ºç”¨ã®è£œåŠ©å€¤ï¼‰
  healthCareFull,
  healthCareEmployee,
  healthCareEmployer,
  pensionFull,
  totalFull: healthCareFull + pensionFull,
  
  // æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ–°ãƒ­ã‚¸ãƒƒã‚¯ã®çµæœã§ä¸Šæ›¸ãï¼ˆæœˆæ¬¡ã¨åŒã˜æ„å‘³ï¼‰
  healthTotal: healthCareFull,
  healthEmployee: healthCareEmployee,
  healthEmployer: healthCareEmployer,
  pensionTotal: pensionFull,
  pensionEmployee,
  pensionEmployer,
  totalEmployee: healthCareEmployee + pensionEmployee,
  totalEmployer: healthCareEmployer + pensionEmployer,
  
  // ãƒ¡ã‚¿æƒ…å ±
  note,
  createdAt: editingBonus?.createdAt ?? new Date().toISOString(),
  createdByUserId: currentUser?.uid
};
```

**ã‚¹ãƒ†ãƒƒãƒ—9: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆIDå¤‰æ›´æ™‚ã®å‡¦ç†**
- æ”¯çµ¦æ—¥ã‚„å¾“æ¥­å“¡IDã‚’å¤‰æ›´ã—ãŸå ´åˆã€`previousId` ã‚’ä½¿ã£ã¦æ—§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‰Šé™¤ï¼ˆç¾è¡Œå®Ÿè£…ã‚’è¸è¥²ï¼‰

### 4-3. UI ã«ã¤ã„ã¦

**ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º:**
- ç¾åœ¨ã®ã€Œè¨ˆç®—çµæœãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ã¯ç°¡æ˜“çš„ãªã‚‚ã®ã«å¤‰æ›´
- æ¨™æº–è³ä¸é¡ã¨ä¸Šé™è¶…éã®è¡¨ç¤ºãŒã‚ã‚Œã°ååˆ†
- è©³ç´°ãªä¿é™ºæ–™è¨ˆç®—çµæœã¯å¿…é ˆã§ã¯ãªã„ï¼ˆä¿å­˜å¾Œã«ãƒšãƒ¼ã‚¸å´ã§ç¢ºèªã§ãã‚‹ãŸã‚ï¼‰

---

## 5. æœˆã”ã¨ã®è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ä»•æ§˜

### 5-1. å¯¾è±¡ãƒ‡ãƒ¼ã‚¿ã®å–å¾—

**å¯¾è±¡å¹´æœˆã®æ±ºå®š:**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸ `yearMonth`ï¼ˆYYYY-MMå½¢å¼ï¼‰

**å¯¾è±¡ BonusPremium ã®å–å¾—:**
```typescript
// payDate ã®å…ˆé ­7æ–‡å­—ãŒ yearMonth ã«ä¸€è‡´ã™ã‚‹ã‚‚ã®ã‚’å–å¾—
const bonuses = await bonusPremiumsService.listByOfficeAndYearMonth(officeId, yearMonth);
```

**å¾“æ¥­å“¡æƒ…å ±ã®å–å¾—:**
```typescript
const employees = await employeesService.list(officeId);
const employeeMap = new Map(employees.map(e => [e.id, e]));
```

**è³‡æ ¼åˆ¤å®š:**
- æœˆæ¬¡ä¿é™ºæ–™ã¨åŒã˜ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä½¿ç”¨
- `hasInsuranceInMonth(employee, yearMonth, 'health')` ã§å¥åº·ä¿é™ºã®è³‡æ ¼åˆ¤å®š
- `hasInsuranceInMonth(employee, yearMonth, 'pension')` ã§åšç”Ÿå¹´é‡‘ã®è³‡æ ¼åˆ¤å®š
- `isCareInsuranceTarget(employee.birthDate, yearMonth)` ã§ä»‹è­·ä¿é™ºå¯¾è±¡åˆ¤å®š

### 5-2. å¥åº·ä¿é™ºï¼‹ä»‹è­·ä¿é™ºã®è¨ˆç®—

**é‡è¦: é›†è¨ˆã®ã€Œæ­£ã€ã¯æ¯å›è¨ˆç®—ã™ã‚‹**

`healthCareFull` / `pensionFull` ãªã©ã®ä¿å­˜å€¤ã¯è¡Œè¡¨ç¤ºç”¨ã®è£œåŠ©ï¼ˆUIç”¨ï¼‰ã¨ä½ç½®ã¥ã‘ã€**ã€Œäº‹æ¥­æ‰€ã®æœˆé–“é›†è¨ˆã€ã‚„ã€Œç´å…¥å‘ŠçŸ¥é¡ã®è¨ˆç®—ã€ã®"æ­£"ã¯ã€å¸¸ã« `effectiveAmount Ã— rate` ã‚’ãã®å ´ã§è¨ˆç®—ã—ãŸå€¤**ã¨ã—ã¾ã™ã€‚

**å„è¡Œï¼ˆå¾“æ¥­å“¡ Ã— æ”¯çµ¦æ—¥ Ã— æ”¯çµ¦å›ï¼‰ã”ã¨ã®è¨ˆç®—:**

```typescript
// 1. å¯¾è±¡åˆ¤å®š
const hasHealth = hasInsuranceInMonth(employee, yearMonth, 'health');
const isCareTarget = isCareInsuranceTarget(employee.birthDate, yearMonth);

if (!hasHealth || bonus.healthEffectiveAmount <= 0) {
  // å¯¾è±¡å¤–
  continue;
}

// 2. ä¿é™ºæ–™ç‡ã®å–å¾—
const rates = await mastersService.getRatesForYearMonth(office, yearMonth);
const careRate = isCareTarget && rates.careRate ? rates.careRate : 0;
const combinedRate = rates.healthRate + careRate;

// 3. å…¨é¡è¨ˆç®—ï¼ˆç«¯æ•°å‡¦ç†å‰ï¼‰â† ã“ã“ãŒã€Œæ­£ã€
const healthCareFull = bonus.healthEffectiveAmount * combinedRate;

// 4. å¾“æ¥­å“¡è² æ‹…ï¼ˆ50éŠ­ãƒ«ãƒ¼ãƒ«é©ç”¨ï¼‰
const healthCareEmployee = roundForEmployeeDeduction(healthCareFull / 2);

// 5. ä¼šç¤¾è² æ‹…ï¼ˆå‚è€ƒå€¤ï¼‰
const healthCareEmployer = healthCareFull - healthCareEmployee;
```

**é›†è¨ˆ:**

```typescript
// äº‹å‰ã«ä¿é™ºæ–™ç‡ã‚’1å›ã ã‘å–å¾—ï¼ˆã“ã®ã‚µãƒ³ãƒ—ãƒ«ã§ã¯ rates ã¯äº‹å‰ã«1å›ã ã‘ getRatesForYearMonth() ã§å–å¾—ã—ã¦ãŠãã€reduce å†…ã§ã¯å†å–å¾—ã—ãªã„æƒ³å®šï¼‰
const rates = await mastersService.getRatesForYearMonth(office, yearMonth);

// ã‚¹ãƒ†ãƒƒãƒ—1: å„è¡Œã”ã¨ã« effectiveAmount Ã— rate ã‚’è¨ˆç®—ã—ã¦å…¨å“¡åˆ†ã®å…¨é¡ã‚’åˆè¨ˆ
const sumFullHealth = bonuses
  .filter(b => {
    const employee = employeeMap.get(b.employeeId);
    if (!employee) return false;
    const hasHealth = hasInsuranceInMonth(employee, yearMonth, 'health');
    return hasHealth && b.healthEffectiveAmount > 0;
  })
  .reduce((sum, b) => {
    const employee = employeeMap.get(b.employeeId)!;
    const isCareTarget = isCareInsuranceTarget(employee.birthDate, yearMonth);
    const careRate = isCareTarget && rates.careRate ? rates.careRate : 0;
    const combinedRate = rates.healthRate + careRate;
    // æ¯å›è¨ˆç®—ã™ã‚‹ï¼ˆä¿å­˜å€¤ã¯ä½¿ã‚ãªã„ï¼‰
    const healthCareFull = b.healthEffectiveAmount * combinedRate;
    return sum + healthCareFull;
  }, 0);

// ã‚¹ãƒ†ãƒƒãƒ—2: æµ®å‹•å°æ•°ç‚¹èª¤å·®å¯¾ç­–ï¼ˆæœˆæ¬¡ã¨åŒã˜helperã‚’ä½¿ç”¨ï¼‰
// æœˆæ¬¡ä¿é™ºæ–™å´ã§ä½¿ç”¨ã—ã¦ã„ã‚‹èª¤å·®å¯¾ç­–helperï¼ˆroundToSenç›¸å½“ï¼‰ã‚’ãã®ã¾ã¾åˆ©ç”¨
// ã¾ãŸã¯ã€åˆè¨ˆå¾Œã« Math.round(sum * 100) / 100 ã§å°æ•°ç¬¬2ä½ã¾ã§ä¸¸ã‚ã‚‹
const sumFullHealthRounded = Math.round(sumFullHealth * 100) / 100;

// ã‚¹ãƒ†ãƒƒãƒ—3: ç´å…¥å‘ŠçŸ¥é¡ï¼ˆ1å††æœªæº€åˆ‡ã‚Šæ¨ã¦ï¼‰
const healthNoticeAmount = Math.floor(sumFullHealthRounded);

// ã‚¹ãƒ†ãƒƒãƒ—4: å¾“æ¥­å“¡è² æ‹…åˆè¨ˆï¼ˆå„è¡Œã”ã¨ã«è¨ˆç®—ï¼‰
const healthEmployeeTotal = bonuses
  .filter(b => {
    const employee = employeeMap.get(b.employeeId);
    if (!employee) return false;
    const hasHealth = hasInsuranceInMonth(employee, yearMonth, 'health');
    return hasHealth && b.healthEffectiveAmount > 0;
  })
  .reduce((sum, b) => {
    const employee = employeeMap.get(b.employeeId)!;
    const isCareTarget = isCareInsuranceTarget(employee.birthDate, yearMonth);
    const careRate = isCareTarget && rates.careRate ? rates.careRate : 0;
    const combinedRate = rates.healthRate + careRate;
    const healthCareFull = b.healthEffectiveAmount * combinedRate;
    const healthCareEmployee = roundForEmployeeDeduction(healthCareFull / 2);
    return sum + healthCareEmployee;
  }, 0);

// ã‚¹ãƒ†ãƒƒãƒ—5: äº‹æ¥­æ‰€è² æ‹…åˆè¨ˆ
const healthEmployerTotal = healthNoticeAmount - healthEmployeeTotal;
```

### 5-3. åšç”Ÿå¹´é‡‘ã®è¨ˆç®—

**å„è¡Œã”ã¨ã®è¨ˆç®—:**

```typescript
// 1. å¯¾è±¡åˆ¤å®š
const hasPension = hasInsuranceInMonth(employee, yearMonth, 'pension');

if (!hasPension || bonus.pensionEffectiveAmount <= 0) {
  // å¯¾è±¡å¤–
  continue;
}

// 2. ä¿é™ºæ–™ç‡ã®å–å¾—
const rates = await mastersService.getRatesForYearMonth(office, yearMonth);

// 3. å…¨é¡è¨ˆç®—ï¼ˆç«¯æ•°å‡¦ç†å‰ï¼‰â† ã“ã“ãŒã€Œæ­£ã€
const pensionFull = bonus.pensionEffectiveAmount * rates.pensionRate;

// 4. å¾“æ¥­å“¡è² æ‹…ï¼ˆ50éŠ­ãƒ«ãƒ¼ãƒ«é©ç”¨ï¼‰
const pensionEmployee = roundForEmployeeDeduction(pensionFull / 2);

// 5. ä¼šç¤¾è² æ‹…ï¼ˆå‚è€ƒå€¤ï¼‰
const pensionEmployer = pensionFull - pensionEmployee;
```

**é›†è¨ˆ:**

```typescript
// äº‹å‰ã«ä¿é™ºæ–™ç‡ã‚’1å›ã ã‘å–å¾—ï¼ˆã“ã®ã‚µãƒ³ãƒ—ãƒ«ã§ã¯ rates ã¯äº‹å‰ã«1å›ã ã‘ getRatesForYearMonth() ã§å–å¾—ã—ã¦ãŠãã€reduce å†…ã§ã¯å†å–å¾—ã—ãªã„æƒ³å®šï¼‰
const rates = await mastersService.getRatesForYearMonth(office, yearMonth);

// ã‚¹ãƒ†ãƒƒãƒ—1: å„è¡Œã”ã¨ã« effectiveAmount Ã— rate ã‚’è¨ˆç®—ã—ã¦å…¨å“¡åˆ†ã®å…¨é¡ã‚’åˆè¨ˆ
const sumFullPension = bonuses
  .filter(b => {
    const employee = employeeMap.get(b.employeeId);
    if (!employee) return false;
    const hasPension = hasInsuranceInMonth(employee, yearMonth, 'pension');
    return hasPension && b.pensionEffectiveAmount > 0;
  })
  .reduce((sum, b) => {
    // æ¯å›è¨ˆç®—ã™ã‚‹ï¼ˆä¿å­˜å€¤ã¯ä½¿ã‚ãªã„ï¼‰
    const pensionFull = b.pensionEffectiveAmount * rates.pensionRate;
    return sum + pensionFull;
  }, 0);

// ã‚¹ãƒ†ãƒƒãƒ—2: æµ®å‹•å°æ•°ç‚¹èª¤å·®å¯¾ç­–ï¼ˆæœˆæ¬¡ã¨åŒã˜helperã‚’ä½¿ç”¨ï¼‰
const sumFullPensionRounded = Math.round(sumFullPension * 100) / 100;

// ã‚¹ãƒ†ãƒƒãƒ—3: ç´å…¥å‘ŠçŸ¥é¡ï¼ˆ1å††æœªæº€åˆ‡ã‚Šæ¨ã¦ï¼‰
const pensionNoticeAmount = Math.floor(sumFullPensionRounded);

// ã‚¹ãƒ†ãƒƒãƒ—4: å¾“æ¥­å“¡è² æ‹…åˆè¨ˆï¼ˆå„è¡Œã”ã¨ã«è¨ˆç®—ï¼‰
const pensionEmployeeTotal = bonuses
  .filter(b => {
    const employee = employeeMap.get(b.employeeId);
    if (!employee) return false;
    const hasPension = hasInsuranceInMonth(employee, yearMonth, 'pension');
    return hasPension && b.pensionEffectiveAmount > 0;
  })
  .reduce((sum, b) => {
    const pensionFull = b.pensionEffectiveAmount * rates.pensionRate;
    const pensionEmployee = roundForEmployeeDeduction(pensionFull / 2);
    return sum + pensionEmployee;
  }, 0);

// ã‚¹ãƒ†ãƒƒãƒ—5: äº‹æ¥­æ‰€è² æ‹…åˆè¨ˆ
const pensionEmployerTotal = pensionNoticeAmount - pensionEmployeeTotal;
```

### 5-4. åˆè¨ˆï¼ˆå¥åº·ï¼‹åšå¹´ï¼‰

**ç”»é¢è¡¨ç¤ºç”¨ã®åˆè¨ˆ:**

```typescript
const totalNoticeAmount = healthNoticeAmount + pensionNoticeAmount;
const totalEmployeeShare = healthEmployeeTotal + pensionEmployeeTotal;
const totalEmployerShare = healthEmployerTotal + pensionEmployerTotal;
```

**é‡è¦:**
- **è¨ˆç®—ã¯å¿…ãšã€Œå¥åº·ï¼‹ä»‹è­·ã€ã¨ã€Œåšå¹´ã€ã‚’æœ€å¾Œã¾ã§å®Œå…¨ã«åˆ¥ã€…ã«è¡Œã†ã“ã¨**
- æœ€å¾Œã«ã€Œåˆè¨ˆã€ã‚«ãƒ¼ãƒ‰ã¨ã—ã¦äºŒã¤ã‚’è¶³ã—åˆã‚ã›ã‚‹ã®ã¯OK

### 5-5. 50éŠ­ãƒ«ãƒ¼ãƒ«ã®å®Ÿè£…

**`roundForEmployeeDeduction()` é–¢æ•°ã‚’æµç”¨:**

```typescript
// premium-calculator.ts ã‹ã‚‰æµç”¨
function roundForEmployeeDeduction(amount: number): number {
  const integer = Math.floor(amount);
  const fractional = amount - integer;
  const cent = Math.round(fractional * 100); // æµ®å‹•å°æ•°ã®èª¤å·®ã‚’é¿ã‘ã‚‹
  return cent <= 50 ? integer : integer + 1;
}
```

**ä»•æ§˜:**
- äº‹æ¥­ä¸»ãŒçµ¦ä¸ï¼ˆè³ä¸ï¼‰ã‹ã‚‰è¢«ä¿é™ºè€…è² æ‹…åˆ†ã‚’æ§é™¤ã™ã‚‹å ´åˆ
- æ§é™¤é¡ã®è¨ˆç®—ã«ãŠã„ã¦ã€è¢«ä¿é™ºè€…è² æ‹…åˆ†ã®ç«¯æ•°ãŒ 50 éŠ­ä»¥ä¸‹ã®å ´åˆã¯åˆ‡ã‚Šæ¨ã¦ã€50 éŠ­ã‚’è¶…ãˆã‚‹å ´åˆã¯åˆ‡ã‚Šä¸Šã’ã¦ 1 å††
- ä¾‹:
  - 12,345.50 å†† â‡’ 12,345 å††ã‚’æ§é™¤ã—ã¾ã™ã€‚
  - 12,345.51 å†† â‡’ 12,346 å††ã‚’æ§é™¤ã—ã¾ã™ã€‚

**é©ç”¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°:**
- å¾“æ¥­å“¡è² æ‹…é¡ã‚’è¨ˆç®—ã™ã‚‹éš›ã«ã€`fullAmount / 2` ã®çµæœã«é©ç”¨

### 5-6. æµ®å‹•å°æ•°ç‚¹èª¤å·®å¯¾ç­–

**æœˆæ¬¡ä¿é™ºæ–™ã¨åŒã˜èª¤å·®å¯¾ç­–helperã‚’ä½¿ç”¨:**

- æœˆæ¬¡ä¿é™ºæ–™å´ã§ä½¿ç”¨ã—ã¦ã„ã‚‹èª¤å·®å¯¾ç­–helperï¼ˆ`roundToSen` ç›¸å½“ï¼‰ã‚’ãã®ã¾ã¾åˆ©ç”¨
- ã¾ãŸã¯ã€åˆè¨ˆå¾Œã« `Math.round(sum * 100) / 100` ã§å°æ•°ç¬¬2ä½ã¾ã§ä¸¸ã‚ã‚‹

**å®Ÿè£…æ–¹é‡:**
- ã€Œå…¨å“¡åˆ†ã® full åˆè¨ˆ â†’ å°æ•°ç¬¬2ä½ã¾ã§ä¸¸ã‚ã‚‹ â†’ å††æœªæº€åˆ‡ã‚Šæ¨ã¦ã€ã¨ã„ã†ã‚¹ãƒ†ãƒƒãƒ—ã§èª¤å·®ã‚’å¸å
- æœˆæ¬¡ä¿é™ºæ–™ã¨è³ä¸ä¿é™ºæ–™ã§ã€Œä¸¸ã‚æ–¹ã€ã€Œèª¤å·®å¯¾ç­–ã€ã®ãƒãƒªã‚·ãƒ¼ã‚’çµ±ä¸€

---

## 6. ãƒšãƒ¼ã‚¸ UI æ§‹æˆ

### 6-1. å…¨ä½“æ§‹æˆ

**æœˆæ¬¡ä¿é™ºæ–™ãƒšãƒ¼ã‚¸ã¨åŒæ§˜ã®æ§‹æˆ:**

1. **ãƒšãƒ¼ã‚¸ãƒ˜ãƒƒãƒ€ãƒ¼**
   - ã‚¿ã‚¤ãƒˆãƒ«ï¼š`è³ä¸ä¿é™ºæ–™ç®¡ç†`
   - ã‚µãƒ–ãƒ†ã‚­ã‚¹ãƒˆï¼ˆçŸ­ã„èª¬æ˜æ–‡ï¼‰
   - ãƒ˜ãƒ«ãƒ—ãƒœã‚¿ãƒ³

2. **å¯¾è±¡å¹´æœˆé¸æŠã‚«ãƒ¼ãƒ‰**
   - å¯¾è±¡å¹´æœˆã‚»ãƒ¬ã‚¯ãƒˆï¼ˆç›´è¿‘12ãƒ¶æœˆã‹ã‚‰é¸æŠï¼‰
   - æœˆæ¬¡ä¿é™ºæ–™ãƒšãƒ¼ã‚¸ã¨åŒã˜ã‚¹ã‚¿ã‚¤ãƒ«

3. **ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«è¡Œï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«ä¸Šéƒ¨ï¼‰**
   - å·¦å´ï¼šãƒ†ãƒ¼ãƒ–ãƒ«ã‚¿ã‚¤ãƒˆãƒ«ã€Œè³ä¸æ”¯çµ¦ä¸€è¦§ï¼ˆ{yearMonth}ï¼‰ã€
   - å³å´ï¼šãƒœã‚¿ãƒ³ç¾¤
     - `CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ`ï¼ˆadmin/hr ã®ã¿ï¼‰
     - `è³ä¸ã‚’ç™»éŒ²`
     - `ãƒ˜ãƒ«ãƒ—`

4. **è³ä¸æ”¯çµ¦ä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ«**
   - å¯¾è±¡å¹´æœˆã®è³ä¸ãƒ‡ãƒ¼ã‚¿ã ã‘è¡¨ç¤º
   - æœˆæ¬¡ä¿é™ºæ–™ãƒšãƒ¼ã‚¸ã¨åŒæ§˜ã®ã‚°ãƒ«ãƒ¼ãƒ—ãƒ˜ãƒƒãƒ€ãƒ¼æ§‹æˆ

5. **é›†è¨ˆã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰**
   - å¥åº·ä¿é™ºï¼‹ä»‹è­·ä¿é™ºã‚«ãƒ¼ãƒ‰
   - åšç”Ÿå¹´é‡‘ã‚«ãƒ¼ãƒ‰
   - åˆè¨ˆã‚«ãƒ¼ãƒ‰
   - æœˆæ¬¡ä¿é™ºæ–™ãƒšãƒ¼ã‚¸ã¨åŒã˜ã‚¹ã‚¿ã‚¤ãƒ«

6. **ç©ºçŠ¶æ…‹**
   - å¯¾è±¡å¹´æœˆã«ãƒ‡ãƒ¼ã‚¿ãŒãªã„ã¨ãã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã€Œè³ä¸ã‚’ç™»éŒ²ã€ãƒœã‚¿ãƒ³

### 6-2. ãƒ†ãƒ¼ãƒ–ãƒ«åˆ—æ§‹æˆ

**ã‚°ãƒ«ãƒ¼ãƒ—ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆ2è¡Œæ§‹æˆï¼‰:**

**ç¬¬1è¡Œ:**
- æ”¯çµ¦æ—¥ï¼ˆrowspan=2ï¼‰
- æ°åï¼ˆrowspan=2ï¼‰
- è³ä¸æ”¯çµ¦é¡ï¼ˆç¨å¼•å‰ï¼‰ï¼ˆrowspan=2ï¼‰
- æ¨™æº–è³ä¸é¡ï¼ˆå…±é€šï¼‰ï¼ˆrowspan=2ï¼‰
- ã€Œå¥åº·ä¿é™ºãƒ»ä»‹è­·ä¿é™ºã€ï¼ˆcolspan=4ï¼‰
- ã€Œåšç”Ÿå¹´é‡‘ã€ï¼ˆcolspan=4ï¼‰
- ã€Œåˆè¨ˆï¼ˆå‚è€ƒï¼‰ã€ï¼ˆcolspan=3ï¼‰
- å¸³ç¥¨ï¼ˆrowspan=2ï¼‰
- æ“ä½œï¼ˆrowspan=2ï¼‰

**ç¬¬2è¡Œ:**
- å¥åº·ä¿é™ºãƒ»ä»‹è­·ä¿é™ºã‚°ãƒ«ãƒ¼ãƒ—:
  - æ¨™æº–è³ä¸é¡ï¼ˆå¥ä¿ï¼‰
  - å…¨é¡
  - å¾“æ¥­å“¡è² æ‹…
  - ä¼šç¤¾è² æ‹…
- åšç”Ÿå¹´é‡‘ã‚°ãƒ«ãƒ¼ãƒ—:
  - æ¨™æº–è³ä¸é¡ï¼ˆåšå¹´ï¼‰
  - å…¨é¡
  - å¾“æ¥­å“¡è² æ‹…
  - ä¼šç¤¾è² æ‹…
- åˆè¨ˆã‚°ãƒ«ãƒ¼ãƒ—:
  - å…¨é¡
  - å¾“æ¥­å“¡è² æ‹…
  - ä¼šç¤¾è² æ‹…

**ãƒ‡ãƒ¼ã‚¿è¡Œ:**
- å„åˆ—ã«å¯¾å¿œã™ã‚‹å€¤ã‚’è¡¨ç¤º
- æ”¯çµ¦æ—¥: `YYYY-MM-DD` å½¢å¼
- è³ä¸æ”¯çµ¦é¡ï¼ˆç¨å¼•å‰ï¼‰: æ•´æ•°è¡¨ç¤º
- æ¨™æº–è³ä¸é¡: æ•´æ•°è¡¨ç¤º
- å…¨é¡ã¯å°æ•°ç‚¹ä»¥ä¸‹2æ¡ã¾ã§è¡¨ç¤ºï¼ˆä¾‹: `12345.67`ï¼‰
- è² æ‹…é¡ã¯æ•´æ•°è¡¨ç¤º

**æ“ä½œåˆ—:**
- å¸³ç¥¨åˆ—: è³ä¸æ”¯æ‰•å±Š PDF ãƒœã‚¿ãƒ³
- æ“ä½œåˆ—: ç·¨é›†ãƒ»å‰Šé™¤ãƒœã‚¿ãƒ³

**è¡¨ç¤ºé †ï¼ˆå·¦ã‹ã‚‰é †ï¼‰:**
1. æ”¯çµ¦æ—¥
2. æ°å
3. è³ä¸æ”¯çµ¦é¡ï¼ˆç¨å¼•å‰ï¼‰
4. æ¨™æº–è³ä¸é¡ï¼ˆå…±é€šï¼‰
5. ã€Œå¥åº·ä¿é™ºãƒ»ä»‹è­·ä¿é™ºã€ã‚°ãƒ«ãƒ¼ãƒ—åˆ—ï¼ˆæ¨™æº–è³ä¸é¡ï¼ˆå¥ä¿ï¼‰ï¼å…¨é¡ï¼å¾“æ¥­å“¡è² æ‹…ï¼ä¼šç¤¾è² æ‹…ï¼‰
6. ã€Œåšç”Ÿå¹´é‡‘ã€ã‚°ãƒ«ãƒ¼ãƒ—åˆ—ï¼ˆæ¨™æº–è³ä¸é¡ï¼ˆåšå¹´ï¼‰ï¼å…¨é¡ï¼å¾“æ¥­å“¡è² æ‹…ï¼ä¼šç¤¾è² æ‹…ï¼‰
7. ã€Œåˆè¨ˆï¼ˆå‚è€ƒï¼‰ã€ã‚°ãƒ«ãƒ¼ãƒ—åˆ—ï¼ˆå…¨é¡ï¼å¾“æ¥­å“¡è² æ‹…ï¼ä¼šç¤¾è² æ‹…ï¼‰
8. å¸³ç¥¨åˆ—ï¼ˆè³ä¸æ”¯æ‰•å±Š PDF ãƒœã‚¿ãƒ³ï¼‰
9. æ“ä½œåˆ—ï¼ˆç·¨é›†ãƒ»å‰Šé™¤ãƒœã‚¿ãƒ³ï¼‰

### 6-3. ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰

**å¥åº·ä¿é™ºï¼‹ä»‹è­·ä¿é™ºã‚«ãƒ¼ãƒ‰:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¥ å¥åº·ä¿é™ºãƒ»ä»‹è­·ä¿é™º           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç´å…¥å‘ŠçŸ¥é¡                      â”‚
â”‚ ï¼ˆç«¯æ•°å‡¦ç†å‰: 12345.67å††ï¼‰      â”‚
â”‚ 12,345å††                        â”‚
â”‚                                 â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                 â”‚
â”‚ å¾“æ¥­å“¡è² æ‹…è¨ˆ                    â”‚
â”‚ 6,000å††                         â”‚
â”‚                                 â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                 â”‚
â”‚ ä¼šç¤¾è² æ‹…è¨ˆ                      â”‚
â”‚ 6,345å††                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åšç”Ÿå¹´é‡‘ã‚«ãƒ¼ãƒ‰:**
- åŒæ§˜ã®æ§‹æˆ

**åˆè¨ˆã‚«ãƒ¼ãƒ‰:**
- å¥åº·ä¿é™ºï¼‹ä»‹è­·ä¿é™ºã¨åšç”Ÿå¹´é‡‘ã®åˆè¨ˆã‚’è¡¨ç¤º

**ãƒ•ãƒƒã‚¿ãƒ¼ãƒãƒ¼ãƒˆ:**
- ã€Œå¾“æ¥­å“¡è² æ‹…é¡ã«ã¯50éŠ­ãƒ«ãƒ¼ãƒ«ï¼ˆ50éŠ­ä»¥ä¸‹åˆ‡ã‚Šæ¨ã¦ï¼50éŠ­è¶…åˆ‡ã‚Šä¸Šã’ï¼‰ã‚’é©ç”¨ã—ã¦ã„ã¾ã™ã€‚ã€
- ã€Œä¼šç¤¾è² æ‹…åˆè¨ˆã¯ã€Œç´å…¥å‘ŠçŸ¥é¡ï¼ˆç«¯æ•°å‡¦ç†å¾Œã®å…¨é¡åˆè¨ˆï¼‰ âˆ’ å¾“æ¥­å“¡è² æ‹…åˆè¨ˆã€ã§ç®—å‡ºã—ã¦ã„ã¾ã™ã€‚ã€

### 6-4. ã‚¹ã‚¿ã‚¤ãƒ«

**æœˆæ¬¡ä¿é™ºæ–™ãƒšãƒ¼ã‚¸ã¨åŒã˜ã‚¹ã‚¿ã‚¤ãƒ«ã‚’é©ç”¨:**
- ã‚«ãƒ¼ãƒ‰ã®è‰²åˆ†ã‘ï¼ˆå¥åº·ä¿é™ºï¼šé’ã€åšç”Ÿå¹´é‡‘ï¼šç·‘ã€åˆè¨ˆï¼šã‚ªãƒ¬ãƒ³ã‚¸ï¼‰
- ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚°ãƒ«ãƒ¼ãƒ—ãƒ˜ãƒƒãƒ€ãƒ¼ã®è‰²åˆ†ã‘
- ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œï¼ˆãƒ¢ãƒã‚¤ãƒ«ã§ã¯1åˆ—è¡¨ç¤ºï¼‰

### 6-5. ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–è¨­è¨ˆ

**å†è¨ˆç®—ãƒœã‚¿ãƒ³ã¯ç½®ã‹ãªã„:**
- å¯¾è±¡å¹´æœˆã®å¤‰æ›´æ™‚ã«è‡ªå‹•ã§å†è¨ˆç®—
- è³ä¸ã®è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤æ™‚ã«è‡ªå‹•ã§å†è¨ˆç®—
- `computed()` ã‚„ `signal()` ã‚’ä½¿ã£ã¦ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«æ›´æ–°

---

## 7. å‰Šé™¤æ™‚ï¼ç·¨é›†æ™‚ã®æ³¨æ„ç‚¹

### 7-1. å‰Šé™¤æ™‚ã®æŒ™å‹•

**`BonusPremium` ã®1ä»¶å‰Šé™¤:**
- è©²å½“è¡ŒãŒæœˆé–“é›†è¨ˆã‹ã‚‰é™¤å¤–ã•ã‚Œã‚‹ã ã‘ã§ã‚ˆã„
- ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«å†è¨ˆç®—ã•ã‚Œã‚‹ãŸã‚ã€é›†è¨ˆå€¤ã¯è‡ªå‹•ã§æ›´æ–°ã•ã‚Œã‚‹

**å¹´åº¦ç´¯è¨ˆï¼ˆå¥ä¿ä¸Šé™ï¼‰ã«ã¤ã„ã¦:**
- å‰Šé™¤æ™‚ã¯ç‰¹åˆ¥ãªå‡¦ç†ã¯ä¸è¦
- æ¬¡å›ã®è¨ˆç®—æ™‚ã«ã€Œæ®‹ã£ã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã ã‘ã€ã§å†èµ°æŸ»ã™ã‚‹å‰æã§è¨­è¨ˆ

### 7-2. ç·¨é›†æ™‚ã®æ³¨æ„ç‚¹

**æ”¯çµ¦æ—¥ã‚„å¾“æ¥­å“¡IDã®å¤‰æ›´:**
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆIDãŒå¤‰ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹
- `previousId` ã‚’ä½¿ã£ã¦æ—§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‰Šé™¤ï¼ˆç¾è¡Œå®Ÿè£…ã‚’è¸è¥²ï¼‰

**å¹´åº¦ã®å¤‰æ›´ï¼ˆæ”¯çµ¦æ—¥ã‚’è·¨å¹´åº¦ã«å¤‰æ›´ã—ãŸå ´åˆï¼‰:**
- å¥åº·ä¿é™ºã®å¹´åº¦ç´¯è¨ˆãŒå¤‰ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹
- ç·¨é›†æ™‚ã«ã€æ–°ã—ã„å¹´åº¦ã®ç´¯è¨ˆã‚’å†è¨ˆç®—ã™ã‚‹å¿…è¦ãŒã‚ã‚‹

**å®Ÿè£…æ™‚ã®æ³¨æ„:**
- `getHealthStandardBonusCumulative()` ã® `excludePayDate` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦ã€ç·¨é›†ä¸­ã®æ”¯çµ¦æ—¥ã‚’é™¤å¤–ã—ã¦ç´¯è¨ˆã‚’è¨ˆç®—

---

## 8. ãƒ†ã‚¹ãƒˆè¦³ç‚¹

### 8-1. å¹´åº¦å†…ã§å¥ä¿573ä¸‡å††ä¸Šé™ã‚’è¶…ãˆã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1: ä¸Šé™ã‚’è¶…ãˆã‚‹æ”¯çµ¦**
- å‰æ: æ—¢ã«å¹´åº¦ç´¯è¨ˆãŒ570ä¸‡å††
- å…¥åŠ›: æ¨™æº–è³ä¸é¡10ä¸‡å††
- æœŸå¾…çµæœ:
  - `healthEffectiveAmount = 3ä¸‡å††`ï¼ˆ573ä¸‡å††ä¸Šé™ã¾ã§ï¼‰
  - `healthExceededAmount = 7ä¸‡å††`
  - ä¿é™ºæ–™è¨ˆç®—ã¯3ä¸‡å††ãƒ™ãƒ¼ã‚¹ã§è¡Œã†

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2: ä¸Šé™ã‚’è¶…ãˆãªã„æ”¯çµ¦**
- å‰æ: æ—¢ã«å¹´åº¦ç´¯è¨ˆãŒ500ä¸‡å††
- å…¥åŠ›: æ¨™æº–è³ä¸é¡50ä¸‡å††
- æœŸå¾…çµæœ:
  - `healthEffectiveAmount = 50ä¸‡å††`
  - `healthExceededAmount = 0`
  - ä¿é™ºæ–™è¨ˆç®—ã¯50ä¸‡å††ãƒ™ãƒ¼ã‚¹ã§è¡Œã†

### 8-2. åŒä¸€æœˆå†…ã§åšå¹´150ä¸‡å††ä¸Šé™ã‚’è¶…ãˆã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹3: ä¸Šé™ã‚’è¶…ãˆã‚‹æ”¯çµ¦**
- å…¥åŠ›: æ¨™æº–è³ä¸é¡200ä¸‡å††
- æœŸå¾…çµæœ:
  - `pensionEffectiveAmount = 150ä¸‡å††`
  - `pensionExceededAmount = 50ä¸‡å††`
  - ä¿é™ºæ–™è¨ˆç®—ã¯150ä¸‡å††ãƒ™ãƒ¼ã‚¹ã§è¡Œã†

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹4: ä¸Šé™ã‚’è¶…ãˆãªã„æ”¯çµ¦**
- å…¥åŠ›: æ¨™æº–è³ä¸é¡100ä¸‡å††
- æœŸå¾…çµæœ:
  - `pensionEffectiveAmount = 100ä¸‡å††`
  - `pensionExceededAmount = 0`
  - ä¿é™ºæ–™è¨ˆç®—ã¯100ä¸‡å††ãƒ™ãƒ¼ã‚¹ã§è¡Œã†

### 8-3. ä»‹è­·ä¿é™ºå¯¾è±¡è€…ã¨éå¯¾è±¡è€…ã®æ··åœ¨

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹5: 40-64æ­³ã®å¾“æ¥­å“¡**
- å‰æ: å¾“æ¥­å“¡ã®å¹´é½¢ãŒ40-64æ­³
- æœŸå¾…çµæœ:
  - `isCareTarget = true`
  - `combinedRate = healthRate + careRate`
  - ä»‹è­·ä¿é™ºæ–™ã‚‚å«ã‚ã¦è¨ˆç®—

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹6: 65æ­³ä»¥ä¸Šã®å¾“æ¥­å“¡**
- å‰æ: å¾“æ¥­å“¡ã®å¹´é½¢ãŒ65æ­³ä»¥ä¸Š
- æœŸå¾…çµæœ:
  - `isCareTarget = false`
  - `combinedRate = healthRate`ï¼ˆä»‹è­·ä¿é™ºæ–™ã¯å«ã¾ãªã„ï¼‰

### 8-4. ç«¯æ•°å‡¦ç†ã§åˆè¨ˆãŒå…¬å¼ä¾‹ã¨ä¸€è‡´ã™ã‚‹ã‹

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹7: 50éŠ­ãƒ«ãƒ¼ãƒ«ã®é©ç”¨ï¼ˆ50éŠ­ä»¥ä¸‹åˆ‡ã‚Šæ¨ã¦ï¼‰**
- å‰æ: å…¨é¡ãŒ24,691.00å††
- æœŸå¾…çµæœ:
  - å¾“æ¥­å“¡è² æ‹… = 12,345å††ï¼ˆ24,691.00 / 2 = 12,345.50 â†’ 50éŠ­ä»¥ä¸‹ãªã®ã§åˆ‡ã‚Šæ¨ã¦ â†’ 12,345å††ï¼‰
  - ä¼šç¤¾è² æ‹… = 12,346.00å††

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹8: 50éŠ­ãƒ«ãƒ¼ãƒ«ã®é©ç”¨ï¼ˆ50éŠ­è¶…åˆ‡ã‚Šä¸Šã’ï¼‰**
- å‰æ: å…¨é¡ãŒ24,691.02å††
- æœŸå¾…çµæœ:
  - å¾“æ¥­å“¡è² æ‹… = 12,346å††ï¼ˆ24,691.02 / 2 = 12,345.51 â†’ 50éŠ­è¶…ãªã®ã§åˆ‡ã‚Šä¸Šã’ â†’ 12,346å††ï¼‰
  - ä¼šç¤¾è² æ‹… = 12,345.02å††

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹9: äº‹æ¥­æ‰€å˜ä½ã®ç´å…¥å‘ŠçŸ¥é¡**
- å‰æ: 3äººã®å¾“æ¥­å“¡ã®å…¨é¡ãŒãã‚Œãã‚Œ 10,000.33å††ã€20,000.66å††ã€30,000.99å††
- æœŸå¾…çµæœ:
  - åˆè¨ˆå…¨é¡ = 60,001.98å††
  - æµ®å‹•å°æ•°ç‚¹èª¤å·®å¯¾ç­–å¾Œ = 60,001.98å††ï¼ˆ`Math.round(60001.98 * 100) / 100`ï¼‰
  - ç´å…¥å‘ŠçŸ¥é¡ = 60,001å††ï¼ˆ1å††æœªæº€åˆ‡ã‚Šæ¨ã¦ï¼‰

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹10: ä¼šç¤¾è² æ‹…åˆè¨ˆã®ç®—å‡º**
- å‰æ: ç´å…¥å‘ŠçŸ¥é¡ = 60,001å††ã€å¾“æ¥­å“¡è² æ‹…åˆè¨ˆ = 30,000å††
- æœŸå¾…çµæœ:
  - ä¼šç¤¾è² æ‹…åˆè¨ˆ = 30,001å††ï¼ˆç´å…¥å‘ŠçŸ¥é¡ âˆ’ å¾“æ¥­å“¡è² æ‹…åˆè¨ˆï¼‰

### 8-5. è³‡æ ¼å–å¾—æ—¥ãƒ»å–ªå¤±æ—¥ã®åˆ¤å®š

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹11: è³‡æ ¼å–å¾—æœˆã®æ”¯çµ¦**
- å‰æ: è³‡æ ¼å–å¾—æ—¥ãŒ2025-06-15ã€æ”¯çµ¦æ—¥ãŒ2025-06-20
- æœŸå¾…çµæœ: 6æœˆåˆ†ã®ä¿é™ºæ–™ã«å«ã¾ã‚Œã‚‹

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹12: è³‡æ ¼å–ªå¤±æœˆã®æ”¯çµ¦**
- å‰æ: è³‡æ ¼å–ªå¤±æ—¥ãŒ2025-06-15ã€æ”¯çµ¦æ—¥ãŒ2025-06-10
- æœŸå¾…çµæœ: 6æœˆåˆ†ã®ä¿é™ºæ–™ã«å«ã¾ã‚Œã‚‹

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹13: è³‡æ ¼å–ªå¤±æœˆã®æ”¯çµ¦ï¼ˆå–ªå¤±æ—¥ã‚ˆã‚Šå¾Œï¼‰**
- å‰æ: è³‡æ ¼å–ªå¤±æ—¥ãŒ2025-06-15ã€æ”¯çµ¦æ—¥ãŒ2025-06-20
- æœŸå¾…çµæœ: 6æœˆåˆ†ã®ä¿é™ºæ–™ã«å«ã¾ã‚Œãªã„ï¼ˆå–ªå¤±æœˆã¯å¯¾è±¡å¤–ï¼‰

### 8-6. é›†è¨ˆãƒ­ã‚¸ãƒƒã‚¯ã®æ¤œè¨¼

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹14: æ¯å›è¨ˆç®—ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã‹**
- å‰æ: `healthCareFull` / `pensionFull` ã®ä¿å­˜å€¤ãŒã‚ã‚‹ãŒã€é›†è¨ˆæ™‚ã¯æ¯å› `effectiveAmount Ã— rate` ã‚’è¨ˆç®—
- æœŸå¾…çµæœ:
  - é›†è¨ˆå€¤ãŒä¿å­˜å€¤ã¨ä¸€è‡´ã™ã‚‹ï¼ˆè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ãŒæ­£ã—ã„å ´åˆï¼‰
  - ã¾ãŸã¯ã€ä¿å­˜å€¤ãŒå¤ã„å ´åˆã§ã‚‚é›†è¨ˆå€¤ã¯æ­£ã—ã„ï¼ˆæ¯å›è¨ˆç®—ã—ã¦ã„ã‚‹ãŸã‚ï¼‰

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹15: æµ®å‹•å°æ•°ç‚¹èª¤å·®å¯¾ç­–ãŒæ©Ÿèƒ½ã™ã‚‹ã‹**
- å‰æ: è¤‡æ•°ã®è³ä¸ãƒ‡ãƒ¼ã‚¿ã‚’åˆè¨ˆã—ãŸçµæœãŒ `xxx.999999` ã®ã‚ˆã†ãªå€¤ã«ãªã‚‹
- æœŸå¾…çµæœ:
  - `Math.round(sum * 100) / 100` ã§å°æ•°ç¬¬2ä½ã¾ã§ä¸¸ã‚ã‚‰ã‚Œã‚‹
  - ãã®å¾Œã€`Math.floor()` ã§1å††æœªæº€åˆ‡ã‚Šæ¨ã¦ãŒæ­£ã—ãå‹•ä½œã™ã‚‹

---

## 9. æœªç¢ºå®šäº‹é …ãƒ»è¦ç¢ºèªäº‹é …

### 9-1. ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆå´ã¸ã®ç¢ºèªäº‹é …

1. **UI/UX**
   - æœˆæ¬¡ä¿é™ºæ–™ãƒšãƒ¼ã‚¸ã¨å®Œå…¨ã«åŒã˜UIæ§‹æˆã§å•é¡Œãªã„ã‹ï¼Ÿ
   - ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºã®è©³ç´°åº¦ã¯ã©ã®ç¨‹åº¦å¿…è¦ã‹ï¼Ÿ

2. **CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ**
   - CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã®åˆ—æ§‹æˆã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ï¼Ÿ
   - æ–°è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆ`healthCareFull` ãªã©ï¼‰ã‚’å«ã‚ã‚‹ã‹ï¼Ÿ

3. **å¸³ç¥¨ç”Ÿæˆ**
   - è³ä¸æ”¯æ‰•å±ŠPDFã®ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ã«å½±éŸ¿ãŒã‚ã‚‹ã‹ï¼Ÿ
   - æ–°ã—ã„è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã‚’åæ˜ ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ï¼Ÿ

4. **ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**
   - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®è³ä¸ä¿é™ºæ–™é›†è¨ˆãƒ­ã‚¸ãƒƒã‚¯ã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ï¼Ÿ

### 9-2. æŠ€è¡“çš„ãªç¢ºèªäº‹é …

1. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**
   - å¯¾è±¡å¹´æœˆã®å¤‰æ›´æ™‚ã«ã€å¤§é‡ã® `BonusPremium` ã‚’èª­ã¿è¾¼ã‚€å ´åˆã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¯å•é¡Œãªã„ã‹ï¼Ÿ

2. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**
   - ä¿é™ºæ–™ç‡ãŒæœªè¨­å®šã®å ´åˆã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯é©åˆ‡ã‹ï¼Ÿ
   - å¾“æ¥­å“¡æƒ…å ±ãŒå–å¾—ã§ããªã„å ´åˆã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¯é©åˆ‡ã‹ï¼Ÿ

3. **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**
   - æ”¯çµ¦æ—¥ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæœªæ¥æ—¥ä»˜ã®ç¦æ­¢ãªã©ï¼‰ã¯å¿…è¦ã‹ï¼Ÿ
   - è³ä¸æ”¯çµ¦é¡ã®ä¸Šé™å€¤ã¯è¨­å®šã™ã‚‹ã‹ï¼Ÿ

---

## 10. å®Ÿè£…ã®å„ªå…ˆé †ä½

### Phase 1: è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®å¤‰æ›´ï¼ˆæœ€å„ªå…ˆï¼‰
1. `bonus-calculator.ts` ã® `calculateBonusPremium()` ã‚’å¤‰æ›´
2. 50éŠ­ãƒ«ãƒ¼ãƒ«ã®é©ç”¨ï¼ˆ`roundForEmployeeDeduction()` ã‚’æµç”¨ï¼‰
3. å¥åº·ä¿é™ºï¼‹ä»‹è­·ä¿é™ºã¨åšç”Ÿå¹´é‡‘ã‚’åˆ†é›¢ã—ãŸè¨ˆç®—çµæœã‚’è¿”ã™
4. æµ®å‹•å°æ•°ç‚¹èª¤å·®å¯¾ç­–ã®å®Ÿè£…

### Phase 2: ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã®æ‹¡å¼µ
1. `BonusPremium` å‹ã«æ–°è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ 
2. `bonus-premiums.service.ts` ã®ä¿å­˜å‡¦ç†ã‚’æ›´æ–°

### Phase 3: å…¥åŠ›ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®å¤‰æ›´
1. `bonus-form-dialog.component.ts` ã®ä¿å­˜å‡¦ç†ã‚’æ–°ã—ã„ãƒ­ã‚¸ãƒƒã‚¯ã«åˆã‚ã›ã¦å¤‰æ›´
2. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºã®ç°¡æ˜“åŒ–ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

### Phase 4: ãƒšãƒ¼ã‚¸UIã®å¤‰æ›´
1. å¯¾è±¡å¹´æœˆã‚»ãƒ¬ã‚¯ãƒˆã®è¿½åŠ 
2. ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆã®å¤‰æ›´ï¼ˆã‚°ãƒ«ãƒ¼ãƒ—ãƒ˜ãƒƒãƒ€ãƒ¼ã€åˆ—æ§‹æˆã€æ”¯çµ¦æ—¥ãƒ»è³ä¸æ”¯çµ¦é¡åˆ—ã®è¿½åŠ ï¼‰
3. ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ã®è¿½åŠ 
4. ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªå†è¨ˆç®—ã®å®Ÿè£…ï¼ˆæ¯å› `effectiveAmount Ã— rate` ã‚’è¨ˆç®—ï¼‰

### Phase 5: ãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼
1. å„ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®å®Ÿè¡Œ
2. é›†è¨ˆãƒ­ã‚¸ãƒƒã‚¯ã®æ¤œè¨¼ï¼ˆæ¯å›è¨ˆç®—ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã‹ï¼‰
3. UI/UXã®ç¢ºèª

---

## 11. å‚è€ƒè³‡æ–™

- `SOCIAL_INSURANCE_PREMIUM_ANALYSIS.md`: ç¤¾ä¼šä¿é™ºæ–™è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®ç¾çŠ¶åˆ†æ
- `src/app/utils/premium-calculator.ts`: æœˆæ¬¡ä¿é™ºæ–™è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆ50éŠ­ãƒ«ãƒ¼ãƒ«å®Ÿè£…ã€èª¤å·®å¯¾ç­–ï¼‰
- `src/app/pages/premiums/monthly/monthly-premiums.page.ts`: æœˆæ¬¡ä¿é™ºæ–™ãƒšãƒ¼ã‚¸ï¼ˆUIå‚è€ƒï¼‰
- `src/app/types.ts`: å‹å®šç¾©
